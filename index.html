<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="ss.js"></script>
    <link rel="stylesheet" href="/style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.js"></script>
    
</head>
<body class="h-full w-full  ">
    <section class="mb-5 " id="sample_form">
        <input type="number" placeholder="Enter the invoice number" id="invoice" class="border hidden border-gray-400 rounded py-2 px-4 mb-2 focus:outline-none focus:border-blue-500">
        <br>
        <input type="number" name="gstinput" id="gstinput" placeholder="Enter the main value" class="border border-gray-400 rounded py-2 px-4 mb-2 focus:outline-none focus:border-blue-500">
        <br>
        <input type="text" id="biller_name" placeholder="Enter the biller name" class="border hidden border-gray-400 rounded py-2 px-4 mb-2 focus:outline-none focus:border-blue-500">
        <br>
        <input type="text" id="city" placeholder="Enter the city" class="border border-gray-400 hidden rounded py-2 px-4 mb-2 focus:outline-none focus:border-blue-500">
        <br>
        <input type="text" id="P.S" placeholder="Enter the P.S" class="border border-gray-400 hidden rounded py-2 px-4 mb-2 focus:outline-none focus:border-blue-500">
        <br>
        <input type="text" id="P.O" placeholder="Enter the P.O" class="border border-gray-400 rounded hidden py-2 px-4 mb-2 focus:outline-none focus:border-blue-500">
        <br>
        <input type="text" id="dist" placeholder="Enter the district" class="border border-gray-400 hidden rounded py-2 px-4 mb-2 focus:outline-none focus:border-blue-500">
        <br>
        <input type="text" id="pincode" placeholder="Enter the pincode" class="border border-gray-400 hidden rounded py-2 px-4 mb-2 focus:outline-none focus-border-blue-500">
        <br>
    
        <button id="but" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500">Submit</button>
    </section>
     
    

    <section class="bg-white h-full w-full px-56 hidden" id="form_main">
        
        <button id="download_button" >Download</button>
        <div id="heading_gupta_enterprise" class="flex flex-row">
            <div class="flex flex-col border w-2/4 border-black p-2">
                <h1 class="font-bold text-xl">GUPTA ENTERPRISE</h1>
                <span>ABC, ABCDE, ABCDEFG-700001</span>
                <span>GSTIN/UIN: *************</span>
                <span>State name: ********</span>
                <span>State Code: **</span>
            </div>
            <div class="flex flex-row w-2/4">
                <div class="w-1/2 flex flex-col border border-black ">
                    <span class="border border-black p-3">Invoice No: <span id="invoice_bill">  </span></span>
                    <span class="border border-black p-2.5">Delivery Note</span>
                    <span class="border border-black p-2.5">Reference No.</span>
                </div>
                <div class="w-1/2 border  flex flex-col border-black ">
                    <span class="border border-black p-3">Dated</span>
                    <span class="border border-black p-2.5">Mode/Terms of payment</span>
                    <span class="border border-black p-2.5">Other References</span>
                </div>
            </div>
        </div>
        <div  class="flex flex-row">
            <div class="flex flex-col border w-2/4 border-black p-2">
                <h1 class="font-bold text-xl" id="biller_bill">BILLER NAME</h1> 
                <span id="city_bill">NAYAPARA, KAKDWIP, SOUTH 24 PGS-743347</span>
                <span>GSTIN/UIN: <span id="gstname">NA</span></span>
                <span>State name: West Bengal</span>
                <span>State Code: 19</span>
            </div>
            <div class="flex flex-row w-2/4">
                <div class="w-1/2 flex flex-col border border-black ">
                    <span class="border border-black p-3">Invoice No</span>
                    <span class="border border-black p-2.5">Delivery Note</span>
                    <span class="border border-black p-2.5">Reference No.</span>
                </div>
                <div class="w-1/2 border  flex flex-col border-black ">
                    <span class="border border-black p-3">Dated</span>
                    <span class="border border-black p-2.5">Mode/Terms of payment</span>
                    <span class="border border-black p-2.5">Other References</span>
                </div>
            </div>
        </div>
        <div class="flex flex-row w-full">
            <span class="border w-[5%] border-black p-2 text-center">SL NO.</span>
            <span class="border w-[70%] border-black p-2 text-center">Description of Goods</span>
            <span class="border w-[10%] border-black p-2 text-center">HSN/SAC</span>
            <span class="border w-[10%] border-black p-2 text-center">Quantity</span>
            <span class="border w-[15%] border-black p-2 text-center">Rate</span>
            <span class="border w-[15%] border-black p-2 text-center">Amount</span>
        </div>
        <div class="flex flex-row w-full h-[600px] relative">
            <span class="border w-[5%] border-black p-2 text-center">1.</span>
            <span class="border w-[70%] border-black p-2 text-center"></span>
            <span class="border w-[10%] border-black p-2 text-center"></span>
            <span class="border w-[10%] border-black p-2 text-center">1</span>
            <span class="border w-[15%] border-black p-2 text-center basic_value" ></span>
            <span class="border w-[15%] border-black p-2 text-center basic_value" ></span>
            <span class="absolute font-extrabold top-[470px] left-[535px] text-right">

                CGST <br>
                SGST  <br>
                ROUND OFF
            </span>
            <span class="absolute  top-[470px] font-extrabold left-[980px] text-right">
                 <span class="gst">2880.95</span> <br>
                 <span class="gst">2880.95</span>  <br>
                <span id="rounded">+0.00</span>
            </span>
        </div>
        <div id="totalportion"  class="flex flex-row w-full">
            <span class="border w-[5%] border-black p-2 text-center"></span>
            <span class="border w-[70%] border-black p-2 text-right">Total</span>
            <span class="border w-[10%] border-black p-2 text-center"></span>
            <span class="border w-[10%] border-black p-2 text-center font-bold">1 NOS</span>
            <span class="border w-[15%] border-black p-2 text-center"></span>
            <span class="border w-[15%] border-black p-2 text-center font-bold" id="main_with_gst_value"></span>

        </div>
        <div class="flex justify-between pr-1 border border-black">
            <span>Amount Chargeable (in words) <br> <span class="font-bold" id="amount_word">INR ONE LAKH TWENTY ONE THOUSAND Only</span></span>
            <span>E. & O.E</span>
        </div>
        <div class="border border-black flex w-full text-center">
                <span class="border border-black w-[30%]">HSN/SAC</span>
                <span  class="border border-black w-[15%]">Taxable Value</span>
                <div class="w-[20%] flex flex-col">
                    <span  class="border border-black">Central Tax</span>
                    <div class="w-full flex ">
                        <span class="border w-[40%] border-black">Rate</span>
                        <span class="border w-[60%] border-black">Amount</span>
                    </div>
                </div>
                <div class="w-[20%] flex flex-col">
                    <span class="border border-black">State Tax</span>
                    <div class="w-full flex ">
                        <span class="border w-[50%] border-black">Rate</span>
                        <span class="border w-[50%] border-black">Amount</span>
                    </div>
                </div>
                <span class=" w-[15%] m-auto">Total Tax Amount</span>
        </div>
        <div class="w-full flex text-center">
            <span class="w-[30%] border border-black font-bold">8708</span>
            <span class="w-[15%]  border border-black basic_value">1,15,238.09</span>
            <span class="w-[8%] border border-black">2.50%</span>
            <span class="w-[12%] border border-black gst">2,880.95</span>
            <span class="w-[8%] border border-black">2.50%</span>
            <span class="w-[12%] border border-black gst">2,880.95</span>
            <span class="w-[15%] border border-black full_gst">5,761.90</span>
        </div>
        <div class="w-full flex text-center">
            <span class="w-[30%] border border-black text-right font-bold">Total</span>
            <span class="w-[15%]  border border-black font-bold basic_value">1,15,238.09</span>
            <span class="w-[8%] border border-black"></span>
            <span class="w-[12%] border border-black font-bold gst">2,880.95</span>
            <span class="w-[8%] border border-black font-bold"></span>
            <span class="w-[12%] border border-black font-bold gst">2,880.95</span>
            <span class="w-[15%] border border-black font-bold full_gst">5,761.90</span>
        </div>
        <div class="w-ful border-l border-r border-black py-2">Tax Amount (in words) : <span class="font-bold" id="gst_word"> INR FIVE THOUSAND SEVEN HUNDRED SIXTY ONE POINT NINE ZERO Only </span></div>
        <div class="w-full flex border-l border-b border-black ">
        <div class="w-[50%]">
            <u>Declaration</u>
            <br>&nbsp;&nbsp;
            We declare that this invoice shows the actual price of the
            goods &nbsp; &nbsp; described and that all particulars are true and correct.
        </div>
        <div class="border border-black w-[50%] text-right pr-2">
             <b>For GUPTA ENTERPRISE</b>
            <br><br><br>
             <span class="text-xs">Authorized Signatory</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        </div>
        </div>
        
    </section>
</body>

<script>
    function ConvertNumberToWords(number) {
    var words = new Array();
    words[0] = '';
    words[1] = 'One';
    words[2] = 'Two';
    words[3] = 'Three';
    words[4] = 'Four';
    words[5] = 'Five';
    words[6] = 'Six';
    words[7] = 'Seven';
    words[8] = 'Eight';
    words[9] = 'Nine';
    words[10] = 'Ten';
    words[11] = 'Eleven';
    words[12] = 'Twelve';
    words[13] = 'Thirteen';
    words[14] = 'Fourteen';
    words[15] = 'Fifteen';
    words[16] = 'Sixteen';
    words[17] = 'Seventeen';
    words[18] = 'Eighteen';
    words[19] = 'Nineteen';
    words[20] = 'Twenty';
    words[30] = 'Thirty';
    words[40] = 'Forty';
    words[50] = 'Fifty';
    words[60] = 'Sixty';
    words[70] = 'Seventy';
    words[80] = 'Eighty';
    words[90] = 'Ninety';
    number = number.toString();
    var atemp = number.split(".");
    var number = atemp[0].split(",").join("");
    var n_length = number.length;
    var words_string = "";
    if (n_length <= 9) {
        var n_array = new Array(0, 0, 0, 0, 0, 0, 0, 0, 0);
        var received_n_array = new Array();
        for (var i = 0; i < n_length; i++) {
            received_n_array[i] = number.substr(i, 1);
        }
        for (var i = 9 - n_length, j = 0; i < 9; i++ , j++) {
            n_array[i] = received_n_array[j];
        }
        for (var i = 0, j = 1; i < 9; i++ , j++) {
            if (i == 0 || i == 2 || i == 4 || i == 7) {
                if (n_array[i] == 1) {
                    n_array[j] = 10 + parseInt(n_array[j]);
                    n_array[i] = 0;
                }
            }
        }
        value = "";
        for (var i = 0; i < 9; i++) {
            if (i == 0 || i == 2 || i == 4 || i == 7) {
                value = n_array[i] * 10;
            } else {
                value = n_array[i];
            }
            if (value != 0) {
                words_string += words[value] + " ";
            }
            if ((i == 1 && value != 0) || (i == 0 && value != 0 && n_array[i + 1] == 0)) {
                words_string += "Crores ";
            }
            if ((i == 3 && value != 0) || (i == 2 && value != 0 && n_array[i + 1] == 0)) {
                words_string += "Lakhs ";
            }
            if ((i == 5 && value != 0) || (i == 4 && value != 0 && n_array[i + 1] == 0)) {
                words_string += "Thousand ";
            }
            if (i == 6 && value != 0 && (n_array[i + 1] != 0 && n_array[i + 2] != 0)) {
                words_string += "Hundred and ";
            } else if (i == 6 && value != 0) {
                words_string += "Hundred ";
            }
        }
        words_string = words_string.split("  ").join(" ");
    }
    return words_string;
}







    
    const submit = document.getElementById('but');
    submit.addEventListener('click', function (e) {
        e.preventDefault();
        const form_main=document.getElementById('form_main');
        form_main.classList.remove("hidden");
        const sample_form=document.getElementById('sample_form');
        sample_form.classList.add("hidden");

        const val = document.getElementById('gstinput');
        const mainvalue = parseFloat(val.value); // Parse as a float
        const without_gst = parseFloat((mainvalue / 1.05).toFixed(2));
        const gst = parseFloat((mainvalue - without_gst).toFixed(2)) / 2;
        const gst5 = 2 * gst;
        const full_value=parseFloat(gst5+without_gst).toFixed(2) ;
        const invoice=document.getElementById('invoice');
        const invoice_val=invoice.value;
        const biller_name=document.getElementById('biller_name');
        const biller_name_val=biller_name.value;
        const city=document.getElementById('city');
        const city_val=city.value;
        const PS=document.getElementById('P.S');
        const PS_val=PS.value;
        const PO=document.getElementById('P.O');
        const PO_val=PO.value;
        const dist=document.getElementById('dist');
        const dist_val=dist.value;
        const pincode=document.getElementById('pincode');
        const pincode_val=pincode.value;
        

        // Select the elements you want to update
        const basic_value = document.querySelectorAll(".basic_value");
        const half_gst = document.querySelectorAll(".gst");
        const full_gst = document.querySelectorAll(".full_gst");
        const vall=document.querySelector('#main_with_gst_value');
        const amount_word=document.getElementById('amount_word');
        const gst_word=document.getElementById('gst_word');
        const amm=ConvertNumberToWords(gst5);
        const amountin=ConvertNumberToWords(mainvalue);
        const invoice_bill=document.getElementById('invoice_bill');
        invoice_bill.innerHTML=`${invoice_val}`;
        const biller_bill=document.getElementById('biller_bill');
        biller_bill.innerHTML=`${biller_name_val}`;
        const city_bill=document.getElementById('city_bill');
        city_bill.innerHTML=`${city_val} , ${PO_val} , ${PS_val} , ${dist_val} , ${pincode_val}`


        basic_value.forEach(function (element) {
            element.textContent = `${without_gst}`;
        });

        half_gst.forEach(function (element) {
            element.textContent = `${gst}`;
        });

        full_gst.forEach(function (element) {
            element.textContent = `${gst5}`;
        });
        vall.innerHTML=`${full_value}`;
        amount_word.innerHTML=`${amountin}`;
        gst_word.innerHTML=`${amm}`;

    });
    window.onload=function(){
    document.getElementById("download_button")
    .addEventListener("click",()=>{
        const invoice_download=this.document.getElementById("form_main");
        console.log(invoice_download);
        console.log(window);
        var opt = {
            margin:       1,
            filename:     'INVOICE.pdf',
            image:        { type: 'jpeg', quality: 0.98 },
            html2canvas:  { scale: 2 },
            jsPDF:        { unit: 'in', format: 'letter', orientation: 'portrait' }
          };
        html2pdf().from(invoice_download).set(opt).save();
    })
}
</script>
</html>
